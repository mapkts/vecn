<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Crates.io Docs.rs MIT licensed Build Status"><meta name="keywords" content="rust, rustlang, rust-lang, vecn"><title>vecn - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../vecn/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate vecn</p><div class="block version"><p>Version 0.2.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all vecn's items</p></a><p class="location"></p><div id="sidebar-vars" data-name="vecn" data-ty="mod" data-relpath="../"></div></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="">vecn</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/vecn/lib.rs.html#1-1750" title="goto source code">[src]</a></span></h1><div class="docblock"><p><a href="https://crates.io/crates/vecn"><img src="https://img.shields.io/crates/v/vecn.svg" alt="Crates.io" /></a>
<a href="https://docs.rs/vecn"><img src="https://docs.rs/vecn/badge.svg" alt="Docs.rs" /></a>
<a href="https://github.com/mapkts/vecn/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT licensed" /></a>
<a href="https://github.com/mapkts/vecn/actions?query=workflow%3ACI+branch%3Amaster"><img src="https://github.com/mapkts/vecn/workflows/CI/badge.svg" alt="Build Status" /></a></p>
<p>Provides the <code>#[vector]</code> macro, which transforms user-defined structs into general vector
types by conditionally implementing appropriate traits and methods for them.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p>Vector types can be either named structs or tuple structs, with primitive elements.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">vecn</span>::<span class="ident">vector</span>;

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Rgb</span>(<span class="ident">u8</span>, <span class="ident">u8</span>, <span class="ident">u8</span>);

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Point3</span> {
    <span class="kw">pub</span> <span class="ident">x</span>: <span class="ident">f32</span>,
    <span class="kw">pub</span> <span class="ident">y</span>: <span class="ident">f32</span>,
    <span class="kw">pub</span> <span class="ident">z</span>: <span class="ident">f32</span>,
}</pre></div>
<p>Generic vector types is supported as well, but you need to manually add the
<a href="https://crates.io/crates/num-traits"><code>num_traits</code></a> crate to your <code>Cargo.toml</code>,  as we use
some num traits to properly bound methods.</p>
<p>It’s recommend to implement primitive vector types whenever possible, because unlike generic
vector types that will cluster a bunch of bounded methods together, methods implemented for
primitive vector types are concise and adequate, which means compiler won’t allow you to call a
meaningless method accidentally.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">vecn</span>::<span class="ident">vector</span>;

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Vec4</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span> {
   <span class="kw">pub</span> <span class="ident">x</span>: <span class="ident">T</span>,
   <span class="kw">pub</span> <span class="ident">y</span>: <span class="ident">T</span>,
   <span class="kw">pub</span> <span class="ident">z</span>: <span class="ident">T</span>,
   <span class="kw">pub</span> <span class="ident">w</span>: <span class="ident">T</span>,
}

<span class="kw">let</span> <span class="ident">point1</span> <span class="op">=</span> <span class="ident">Vec4</span>::<span class="ident">new</span>(<span class="number">2.</span>, <span class="number">2.</span>, <span class="number">2.</span>, <span class="number">1.</span>);
<span class="kw">let</span> <span class="ident">point2</span> <span class="op">=</span> <span class="ident">Vec4</span>::<span class="ident">new</span>(<span class="number">4.</span>, <span class="number">2.</span>, <span class="number">2.</span>, <span class="number">1.</span>);
<span class="kw">let</span> <span class="ident">distance</span> <span class="op">=</span> <span class="ident">point1</span>.<span class="ident">distance</span>(<span class="ident">point2</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">distance</span>, <span class="number">2.</span>);</pre></div>
<p>It’s possible to create a vector type with many lanes, though only a small set of methods will
be implemented for it.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">vecn</span>::<span class="ident">vector</span>;

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Vec8</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span>(<span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>, <span class="ident">T</span>);

<span class="kw">let</span> <span class="ident">v8</span>: <span class="ident">Vec8</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span> <span class="op">=</span> (<span class="number">0u8</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>).<span class="ident">into</span>();
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">v8</span>.<span class="ident">sum</span>(), <span class="number">28</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">v8</span>.<span class="ident">product</span>(), <span class="number">0</span>);</pre></div>
<h1 id="documentation" class="section-header"><a href="#documentation">Documentation</a></h1>
<p>You can view the traits and methods implemented for the annotated struct using <code>cargo doc</code> in
your project’s workspace, if the annotated struct is public. For situations where the annotated
struct cannot be public, you can look at some example vector types that generated by the
<code>#[vector]</code> macro from <a href="https://mapkts.github.io/vecn/vectory/index.html"><code>vectory</code></a>.</p>
<h1 id="additional-notes" class="section-header"><a href="#additional-notes">Additional Notes</a></h1>
<p><code>#[vector]</code> will automatically derive <a href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html"><code>Copy</code></a>, <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html"><code>Clone</code></a> and <a href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html"><code>PartialEq</code></a> traits for the
annotated struct for convenience. Many methods rely on these properties to functionally work.
If you want to derive more traits for a vector type, put them below the <code>#[vector]</code> attribute
(otherwise the compiler will yell at you), like so:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Point3</span>(<span class="ident">f32</span>, <span class="ident">f32</span>, <span class="ident">f32</span>);</pre></div>
<p>Besides, it’s worth noting that vecn will only implement a suitable set of traits and methods
for the annotated struct. Some traits like <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html"><code>Display</code></a> should be better implemented by users,
and some methods are missing for varying reasons. Hopefully the annotated struct is totally
local to user space, you are free to implement whatever methods and traits you like.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">vecn</span>::<span class="ident">vector</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">fmt</span>;

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Vec3</span>(<span class="ident">f32</span>, <span class="ident">f32</span>, <span class="ident">f32</span>);

<span class="attribute">#[<span class="ident">vector</span>]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Vec4</span>(<span class="ident">f32</span>, <span class="ident">f32</span>, <span class="ident">f32</span>, <span class="ident">f32</span>);

<span class="kw">impl</span> <span class="ident">Vec4</span> {
    <span class="doccomment">/// Shrinks a `Vec4` to a `Vec3`, with its last lane discarded.</span>
    <span class="attribute">#[<span class="ident">inline</span>]</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">shrink</span>(<span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Vec3</span> {
        <span class="kw">let</span> (<span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">z</span>, <span class="kw">_</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">into</span>();
        <span class="ident">Vec3</span>::<span class="ident">new</span>(<span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">z</span>)
    }
}

<span class="comment">// As we don&#39;t know the relations between vector types, `From` trait needed to implement</span>
<span class="comment">// manually.</span>
<span class="kw">impl</span> <span class="ident">From</span><span class="op">&lt;</span><span class="ident">Vec3</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Vec4</span> {
    <span class="attribute">#[<span class="ident">inline</span>]</span>
    <span class="kw">fn</span> <span class="ident">from</span>(<span class="ident">v3</span>: <span class="ident">Vec3</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Vec4</span> {
        <span class="ident">Vec4</span>::<span class="ident">new</span>(<span class="ident">v3</span>.<span class="number">0</span>, <span class="ident">v3</span>.<span class="number">1</span>, <span class="ident">v3</span>.<span class="number">2</span>, <span class="number">0.</span>)
    }
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Display</span> <span class="kw">for</span> <span class="ident">Vec3</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="macro">write</span><span class="macro">!</span>(<span class="ident">f</span>, <span class="string">&quot;({}, {}, {})&quot;</span>, <span class="self">self</span>.<span class="number">0</span>, <span class="self">self</span>.<span class="number">1</span>, <span class="self">self</span>.<span class="number">2</span>)
    }
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Display</span> <span class="kw">for</span> <span class="ident">Vec4</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="macro">write</span><span class="macro">!</span>(<span class="ident">f</span>, <span class="string">&quot;({}, {}, {}, {})&quot;</span>, <span class="self">self</span>.<span class="number">0</span>, <span class="self">self</span>.<span class="number">1</span>, <span class="self">self</span>.<span class="number">2</span>, <span class="self">self</span>.<span class="number">3</span>)
    }
}
</pre></div>
</div><h2 id="attributes" class="section-header"><a href="#attributes">Attribute Macros</a></h2>
<table><tr class="module-item"><td><a class="attr" href="attr.vector.html" title="vecn::vector attr">vector</a></td><td class="docblock-short"><p>Macro that transforms user-defined structs into general vector types.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="vecn" data-search-js="../search-index.js"></div>
    <script src="../main.js"></script></body></html>